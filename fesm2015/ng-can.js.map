{"version":3,"file":"ng-can.js.map","sources":["ng://ng-can/lib/services/ng-can.service.ts","ng://ng-can/lib/module.options.ts","ng://ng-can/lib/directives/can.directive.ts","ng://ng-can/lib/ng-can.module.ts"],"sourcesContent":["import { ElementRef, Injectable } from '@angular/core';\nimport {\n  INgCanPermissions,\n  INgCanPermissionsCheckable,\n  INgCanHideApproachesControllable,\n  THideApproach\n} from '../ng-can.typings';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgCanService implements INgCanPermissionsCheckable, INgCanHideApproachesControllable {\n  private _permissions: INgCanPermissions = {};\n\n  constructor() {\n  }\n\n  loadPermissions(permissions: { [key: string]: boolean }): void {\n    this._permissions = permissions;\n  }\n\n  checkConditions(conditions: INgCanPermissions, strict?: boolean) {\n    let allowed = true;\n\n    for (const key in conditions) {\n      if (!conditions.hasOwnProperty(key)) {\n        continue;\n      }\n\n      if (this._permissions[key] === undefined) {\n        if (!strict) {\n          continue;\n        }\n\n        allowed = false;\n        break;\n      }\n\n      if (this._permissions[key] !== conditions[key]) {\n        allowed = false;\n\n        break;\n      }\n    }\n\n    return allowed;\n  }\n\n  hideElement(el: ElementRef, hideApproach: THideApproach): void {\n    switch (hideApproach) {\n      case 'visibility': {\n        el.nativeElement.style.visibility = 'hidden';\n\n        break;\n      }\n\n      case 'hidden': {\n        el.nativeElement.hidden = true;\n\n        break;\n      }\n\n      default:\n        throw new Error(`Unknown Hide Approach ${hideApproach}`);\n    }\n  }\n\n  showElement(el: ElementRef, hideApproach: THideApproach): void {\n    switch (hideApproach) {\n      case 'visibility': {\n        el.nativeElement.style.visibility = 'visible';\n\n        break;\n      }\n\n      case 'hidden': {\n        el.nativeElement.hidden = false;\n\n        break;\n      }\n\n      default:\n        throw new Error(`Unknown Hide Approach ${hideApproach}`);\n    }\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { IModuleOptions } from './ng-can.typings';\n\nexport const MODULE_OPTIONS = new InjectionToken<IModuleOptions>('module.options');\n\n","import { Directive, ElementRef, Inject, Input, OnInit } from '@angular/core';\nimport { NgCanService } from '../services/ng-can.service';\nimport { IModuleOptions, INgCanPermissions, THideApproach } from '../ng-can.typings';\nimport { MODULE_OPTIONS } from '../module.options';\n\n@Directive({\n  selector: '[ng-can]'\n})\nexport class NgCanDirective implements OnInit {\n  @Input() conditions: INgCanPermissions = {};\n  @Input() permissions: INgCanPermissions = {};\n  @Input() strictMode: boolean;\n  @Input() hideApproach: THideApproach = this.options.hide_approach;\n\n  constructor(protected el: ElementRef, protected ngCanService: NgCanService,\n              @Inject(MODULE_OPTIONS) protected options: IModuleOptions) {\n  }\n\n  ngOnInit(): void {\n    this.hideElement();\n\n    this.ngCanService.loadPermissions(this.permissions);\n    const needToShow = this.ngCanService.checkConditions(this.conditions, this.strictMode);\n\n    if (needToShow) {\n      this.showElement();\n    }\n  }\n\n  hideElement() {\n    this.ngCanService.hideElement(this.el, this.hideApproach);\n  }\n\n  showElement() {\n    this.ngCanService.showElement(this.el, this.hideApproach);\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { NgCanDirective } from './directives/can.directive';\nimport { IModuleOptions } from './ng-can.typings';\nimport { MODULE_OPTIONS } from './module.options';\n\n@NgModule({\n  declarations: [\n    NgCanDirective\n  ],\n  imports: [],\n  exports: [\n    NgCanDirective\n  ]\n})\nexport class NgCanModule {\n  static forChild(options: IModuleOptions): ModuleWithProviders {\n    return {\n      ngModule: NgCanModule,\n      providers: [\n        {\n          provide: MODULE_OPTIONS,\n          useValue: options\n        }\n      ]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
